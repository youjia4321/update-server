{"version":3,"sources":["webpack:///./src/views/Websocket.vue?45b4","webpack:///src/views/Websocket.vue","webpack:///./src/views/Websocket.vue?25ef","webpack:///./src/views/Websocket.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","_v","staticStyle","attrs","nativeOn","$event","type","indexOf","_k","keyCode","key","send","model","value","callback","$$v","text","expression","on","_l","item","index","domProps","_s","staticRenderFns","data","path","socket","messages","created","init","methods","WebSocket","alert","onopen","open","onerror","error","onmessage","getMessage","console","log","push","e","url","window","download_file","close","destroyed","onclose","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,MAAMA,EAAG,SAAS,CAACJ,EAAIM,GAAG,iBAAiBF,EAAG,MAAMA,EAAG,MAAMA,EAAG,QAAQ,CAACG,YAAY,CAAC,MAAQ,SAASC,MAAM,CAAC,KAAO,OAAO,KAAO,aAAa,YAAc,oBAAoBC,SAAS,CAAC,MAAQ,SAASC,GAAQ,OAAIA,EAAOC,KAAKC,QAAQ,QAAQZ,EAAIa,GAAGH,EAAOI,QAAQ,QAAQ,GAAGJ,EAAOK,IAAI,SAAkB,KAAcf,EAAIgB,KAAKN,KAAUO,MAAM,CAACC,MAAOlB,EAAQ,KAAEmB,SAAS,SAAUC,GAAMpB,EAAIqB,KAAKD,GAAKE,WAAW,UAAUlB,EAAG,MAAMA,EAAG,MAAMA,EAAG,SAAS,CAACI,MAAM,CAAC,KAAO,WAAWe,GAAG,CAAC,MAAQvB,EAAIgB,OAAO,CAAChB,EAAIM,GAAG,UAAUF,EAAG,MAAMJ,EAAIwB,GAAIxB,EAAY,SAAE,SAASyB,EAAKC,GAAO,OAAOtB,EAAG,IAAI,CAACW,IAAIW,GAAO,CAACtB,EAAG,SAAS,CAACuB,SAAS,CAAC,UAAY3B,EAAI4B,GAAGH,WAAc,IACzvBI,EAAkB,GCwBtB,GACEC,KADF,WAEI,MAAO,CACLC,KAAM,gCACNC,OAAQ,GACRX,KAAM,GACNY,SAAU,KAGdC,QATF,WAUIjC,KAAKkC,QAEPC,QAAS,CACPD,KADJ,WAE+B,qBAAdE,UACTC,MAAM,mBAGNrC,KAAK+B,OAAS,IAAIK,UAAUpC,KAAK8B,MAEjC9B,KAAK+B,OAAOO,OAAStC,KAAKuC,KAE1BvC,KAAK+B,OAAOS,QAAUxC,KAAKyC,MAE3BzC,KAAK+B,OAAOW,UAAY1C,KAAK2C,aAGjCJ,KAfJ,WAiBMK,QAAQC,IAAI,eAEdJ,MAnBJ,WAoBMzC,KAAKkC,OACLU,QAAQC,IAAI,SAEdF,WAvBJ,SAuBA,GAEM3C,KAAKgC,SAASc,KAAK,WAAaC,EAAElB,MAClC,IAAImB,EAAM,kCAAoCD,EAAElB,KAChDoB,OAAOV,KAAKS,IAEdjC,KA7BJ,WA8BM,IAAN,yBACMf,KAAK+B,OAAOhB,KAAKmC,GACjBlD,KAAKgC,SAASc,KAAK,QAAU9C,KAAKoB,MAClCpB,KAAKoB,KAAO,IAEd+B,MAnCJ,WAoCMP,QAAQC,IAAI,gBAGhBO,UAnDF,WAqDIpD,KAAK+B,OAAOsB,QAAUrD,KAAKmD,QC9EoT,I,YCO/UG,EAAY,eACd,EACAxD,EACA8B,GACA,EACA,KACA,KACA,MAIa,aAAA0B,E","file":"static/js/chunk-2d0a3b05.19ac75bf.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('br'),_c('strong',[_vm._v(\"WebSocket测试\")]),_c('br'),_c('br'),_c('Input',{staticStyle:{\"width\":\"350px\"},attrs:{\"type\":\"text\",\"icon\":\"ios-folder\",\"placeholder\":\"Enter message...\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.send($event)}},model:{value:(_vm.text),callback:function ($$v) {_vm.text=$$v},expression:\"text\"}}),_c('br'),_c('br'),_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.send}},[_vm._v(\"发送消息\")]),_c('br'),_vm._l((_vm.messages),function(item,index){return _c('p',{key:index},[_c('strong',{domProps:{\"innerHTML\":_vm._s(item)}})])})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <br />\r\n    <strong>WebSocket测试</strong>\r\n    <br />\r\n    <br />\r\n    <Input\r\n      type=\"text\"\r\n      style=\"width: 350px\"\r\n      icon=\"ios-folder\"\r\n      v-model=\"text\"\r\n      placeholder=\"Enter message...\"\r\n      @keyup.enter.native=\"send\"\r\n    />\r\n    <br />\r\n    <br />\r\n    <Button type=\"primary\" @click=\"send\">发送消息</Button>\r\n    <br />\r\n    <p v-for=\"(item, index) in messages\" :key=\"index\">\r\n      <strong v-html=\"item\"></strong>\r\n    </p>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      path: \"ws://127.0.0.1:8080/websocket\",\r\n      socket: \"\",\r\n      text: \"\",\r\n      messages: []\r\n    };\r\n  },\r\n  created() {\r\n    this.init();\r\n  },\r\n  methods: {\r\n    init() {\r\n      if (typeof WebSocket === \"undefined\") {\r\n        alert(\"您的浏览器不支持socket\");\r\n      } else {\r\n        // 实例化socket\r\n        this.socket = new WebSocket(this.path);\r\n        // 监听socket连接\r\n        this.socket.onopen = this.open;\r\n        // 监听socket错误信息\r\n        this.socket.onerror = this.error;\r\n        // 监听socket消息\r\n        this.socket.onmessage = this.getMessage;\r\n      }\r\n    },\r\n    open() {\r\n      /* eslint-disable */\r\n      console.log(\"socket连接成功\");\r\n    },\r\n    error() {\r\n      this.init();\r\n      console.log(\"连接错误\");\r\n    },\r\n    getMessage(e) {\r\n      // 前端数据接收\r\n      this.messages.push(\"服务器返回文件：\" + e.data);\r\n      var url = \"http://127.0.0.1:8000/download/\" + e.data;\r\n      window.open(url);\r\n    },\r\n    send() {\r\n      const download_file = 'documents/'+this.text\r\n      this.socket.send(download_file);\r\n      this.messages.push(\"下载文件：\" + this.text);\r\n      this.text = \"\";\r\n    },\r\n    close() {\r\n      console.log(\"socket已经关闭\");\r\n    }\r\n  },\r\n  destroyed() {\r\n    // 销毁监听\r\n    this.socket.onclose = this.close;\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Websocket.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Websocket.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Websocket.vue?vue&type=template&id=208d588a&\"\nimport script from \"./Websocket.vue?vue&type=script&lang=js&\"\nexport * from \"./Websocket.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}